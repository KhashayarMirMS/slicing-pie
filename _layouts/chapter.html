<!DOCTYPE html>

{% if page.collection %}
{% assign next = null%}
{% assign prev = null%}
{% endif %}
{% assign sorted = site.collections | sort: 'index' %}
{% for collection in sorted %}
{% assign collectionLoop = forloop %}
{% assign links = site[collection.label] %}
{% for link in links %}
{% if link.id == page.id %}

{% unless forloop.first and collectionLoop.first %}
{% assign prev = tmpprev %}
{% endunless %}

{% unless forloop.last %}
{% assign next = links[forloop.index] %}
{% else%}
{% unless collectionLoop.last %}
{% assign nextCollection = sorted[collectionLoop.index].label %}
{% assign next = site[nextCollection][0] %}
{% endunless %}
{% endunless %}

{% endif %}
{% assign tmpprev = link %}
{% endfor %}
{% endfor %}

<html>

{% include head.html %}

<body>
    <div id="layout">
        <!-- Menu toggle -->
        <a class="menu-link" href="#menu" id="menuLink">
            <!-- Hamburger icon -->
            <span></span>
        </a>

        <div id="menu">
            <div class="pure-menu">
                <ul class="pure-menu-list">
                    {% assign sorted = site.collections | sort: 'index' %}
                    {% for collection in sorted %}
                    <div class="pure-menu-heading">{{ collection.name }}</div>
                    {% for link in site[collection.label] %}
                    <li class="pure-menu-item">
                        {% if link.title == page.title %}
                        <div class="pure-menu-link current">
                            {{link.title}}
                        </div>
                        {% else %}
                        <a class="pure-menu-link" href="{{ site.url }}{{ site.baseurl }}{{ link.url }}">
                            {{link.title}}
                        </a>
                        {% endif %}
                    </li>
                    {% endfor %}
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="pure-g" id="content">
            <div class="center-g pure-u-1 pure-u-sm-1 pure-u-md-2-3 pure-u-lg-1-2 pure-u-xl-2-5">
                <div class="pure-g">
                    <div class="pure-u-1-1 content">
                        {{ content }}
                    </div>


                    <div class="prev pure-u-1-2">
                        {% if prev %}
                        <h2>
                            <a href="{{ site.url }}{{ site.baseurl }}{{ prev.url }}">
                                &lt; {{ prev.title }}
                            </a>
                        </h2>
                        {% endif %}
                    </div>


                    <div class="next pure-u-1-2">
                        {% if next %}
                        <h2>
                            <a href="{{ site.url }}{{ site.baseurl }}{{ next.url }}">
                                {{ next.title }} &gt;
                            </a>
                        </h2>
                        {% endif %}
                    </div>


                    {% include footer.html %}
                </div>
            </div>
        </div>
        <script src="{{ site.url }}{{ site.baseurl }}/assets/js/menu.js"></script>
        <script type="text/javascript" src="{{ site.url }}{{ site.baseurl }}/assets/js/math.js"></script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Register.StartupHook('End', fixMathExpressions);
        </script>
        <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/javascript" src="{{ site.url }}{{ site.baseurl }}/assets/js/table.js"></script>
    </div>
</body>

</html>